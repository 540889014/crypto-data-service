# Crypto Data Service (暗号資産データサービス)

これは暗号資産（あんごうしさん）のデータ分析（ぶんせき）とバックテストのためのプロジェクトです。Spring Bootを使（つか）って作（つく）りました。

## 1. このプロジェクトでできること (主な機能)

このサービスを使（つか）うと、いろいろなことができます。

- **マーケットデータの取得（しゅとく）**
  - K-line（けいせん、「ローソク足」のこと）データや、リアルタイムの価格（かかく）データ、板（いた）情報（じょうほう）などをAPIで取（と）ってくることができます。
- **バックテスト機能（きのう）**
  - 自分（じぶん）で作（つく）った投資（とうし）の戦略（せんりゃく）が正（ただ）しいかどうか、過去（かこ）のデータを使（つか）ってテストすることができます。
  - テストのインスタンスを作（つく）ったり、レポートを見（み）たり、要（い）らなくなったら消（け）したりできます。
- **ユーザー管理（かんり）**
  - ユーザーを作（つく）ったり、パスワードを変（か）えたりできます。
- **戦略（せんりゃく）テンプレートの管理**
  - バックテストで使（つか）う戦略（せんりゃく）のテンプレートを保存（ほぞん）したり、読（よ）み出（だ）したりできます。
- **統計的分析（とうけいてきぶんせき）ツール**
  - ADF検定（けんてい）やHurst指数（しすう）など、専門的（せんもんてき）な分析（ぶんせき）を簡単（かんたん）に行（おこな）うAPIがあります。
- **データ同期（どうき）**
  - OKXやBinanceなど、外部（がいぶ）の取引所（とりひきじょ）から自動（じどう）でデータを集（あつ）めることができます。

## 2. 使（つか）われている技術（ぎじゅつ）

- **バックエンド**: Java 17, Spring Boot 3
- **データベース**:
  - **MySQL**: ユーザーの情報（じょうほう）や戦略（せんりゃく）のテンプレートなどを保存（ほぞん）します。
  - **ClickHouse**: K-lineのような、とても大（おお）きなデータを速（はや）く分析（ぶんせき）するために使（つか）います。
- **ビルドツール**: Maven
- **その他**: WebSocket, Flyway (データベースのマイグレーション)

## 3. プロジェクトを動（うご）かすために必要（ひつよう）なもの

あなたのコンピュータに、次（つぎ）のソフトウェアをインストールしてください。

- Java (JDK) 17 以上
- Maven 3.6 以上
- MySQL サーバー
- ClickHouse サーバー

## 4. プロジェクトの実行方法（じっこうほうほう）

1. **プロジェクトをダウンロードします。**
   ```bash
   git clone <リポジトリのURL>
   cd crypto-data-service
   ```

2. **設定（せってい）ファイルを変（か）えます。**
   `maxquant-service-app/src/main/resources/application.yml` というファイルを開（ひら）いてください。
   あなたのMySQLとClickHouseのユーザー名（めい）、パスワードなどに直（なお）してください。

   ```yaml
   spring:
     datasource:
       url: jdbc:mysql://localhost:3306/your_database # あなたのMySQLデータベース
       username: your_username # あなたのユーザー名
       password: your_password # あなたのパスワード
     clickhouse:
       jdbc-url: jdbc:clickhouse://localhost:8123/your_clickhouse_db # あなたのClickHouseデータベース
       # ...
   ```

3. **Mavenでプロジェクトをビルドします。**
   コマンドプロンプト（ターミナル）で次（つぎ）のコマンドをタイプします。
   ```bash
   mvn clean install
   ```

4. **アプリケーションを実行（じっこう）します。**
   ビルドが成功（せいこう）したら、次（つぎ）のコマンドでサーバーをスタートします。
   ```bash
   java -jar maxquant-service-app/target/maxquant-service-app-1.0-SNAPSHOT.jar
   ```

5. **確認（かくにん）します。**
   サーバーは `http://localhost:8080` で動（うご）いています。ブラウザやAPIツールでアクセスしてみてください。

## 5. APIの概要（がいよう）

このプロジェクトにはたくさんのAPIがあります。主なものを紹介（しょうかい）します。

| 機能（きのう）                     | URLのプレフィックス                 | 説明（せつめい）                                     |
| ---------------------------------- | ----------------------------------- | ---------------------------------------------------- |
| ユーザー認証（にんしょう）         | `/api/v1/auth`                      | ログインやトークンのチェックをします。               |
| マーケットデータ                   | `/api/v1/market`                    | K-lineやリアルタイムの価格（かかく）などを取（と）ります。 |
| バックテストの実行（じっこう）     | `/api/v1/backtest`                  | Pythonのスクリプトでバックテストを動（うご）かします。|
| バックテストのインスタンス管理     | `/api/backtest-instances`           | バックテストのインスタンスを作（つく）ったり消（け）したりします。|
| バックテストのレポート             | `/api/backtest-reports`             | テスト結果（けっか）のレポートを見（み）ます。       |
| ユーザー管理                       | `/api/users`                        | ユーザーの管理（かんり）をします。                   |
| 戦略（せんりゃく）テンプレート     | `/api/strategy-templates`           | 戦略（せんりゃく）のテンプレートを管理（かんり）します。|
| 統計的裁定取引（とうけいてきさいていとりひき） | `/api/v1/statistical-arbitrage` | 専門的（せんもんてき）な統計分析（とうけいぶんせき）をします。 |
| データ同期（どうき）と修正（しゅうせい） | `/api/v1/data-correction`           | データのまちがいを直（なお）したりします。         |

**APIレスポンスの形（かたち）について**

すべてのAPIは、下（した）のような同（おな）じ形（かたち）のJSONを返（かえ）します。

- **成功（せいこう）したとき**:
  ```json
  {
    "code": 200,
    "message": "Success",
    "data": { ... } // ここに本当のデータが入っています
  }
  ```
- **失敗（しっぱい）したとき**:
  ```json
  {
    "code": 500, // エラーのコード
    "message": "エラーの理由", // エラーのメッセージ
    "data": null
  }
  ```
フロントエンドでAPIを使（つか）うときは、まず`code`が`200`かどうかをチェックしてください。

## 6. データベースについて

このプロジェクトはFlywayを使（つか）っています。アプリケーションを最初（さいしょ）に実行（じっこう）するとき、データベースに必要（ひつよう）なテーブルが自動（じどう）で作（つく）られます。あなたはデータベースの準備（じゅんび）だけすれば大丈夫（だいじょうぶ）です。 